<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demo - Componentes Avanzados 2 - LNV</title>
  
  <!-- Framework CSS -->
  <link rel="stylesheet" href="css/lnv-framework.css">
</head>
<body>

  <div class="lnv-container lnv-py-8">
    
    <!-- Header -->
    <div class="lnv-mb-8">
      <h1>üöÄ Componentes Avanzados 2 - LNV Framework</h1>
      <p class="lnv-text-gray">DataTable, Transfer List, Tree View, Image Gallery</p>
    </div>

    <!-- DATA TABLE -->
    <div class="lnv-mb-8">
      <h2 class="lnv-mb-4">üìä Data Table</h2>
      <div id="dataTable"></div>
    </div>

    <hr class="lnv-divider">

    <!-- TRANSFER LIST -->
    <div class="lnv-mb-8">
      <h2 class="lnv-mb-4">‚ÜîÔ∏è Transfer List</h2>
      <div class="lnv-card">
        <div class="lnv-card-header">Asignar Permisos</div>
        <div class="lnv-card-body">
          <div id="transferList"></div>
          <div class="lnv-mt-4">
            <button class="lnv-btn lnv-btn-primary" onclick="showSelected()">
              Ver Seleccionados
            </button>
          </div>
        </div>
      </div>
    </div>

    <hr class="lnv-divider">

    <!-- TREE VIEW -->
    <div class="lnv-mb-8">
      <h2 class="lnv-mb-4">üå≥ Tree View</h2>
      <div class="lnv-row">
        <div class="lnv-col-12 lnv-col-md-6">
          <div class="lnv-card">
            <div class="lnv-card-header">
              <div class="lnv-flex lnv-justify-between lnv-items-center">
                <span>Estructura de Archivos</span>
                <div>
                  <button class="lnv-btn lnv-btn-sm lnv-btn-light" onclick="treeInstance.expandAll()">
                    Expandir Todo
                  </button>
                  <button class="lnv-btn lnv-btn-sm lnv-btn-light" onclick="treeInstance.collapseAll()">
                    Colapsar Todo
                  </button>
                </div>
              </div>
            </div>
            <div class="lnv-card-body">
              <div id="treeView"></div>
            </div>
          </div>
        </div>

        <div class="lnv-col-12 lnv-col-md-6">
          <div class="lnv-card">
            <div class="lnv-card-header">Informaci√≥n del Nodo</div>
            <div class="lnv-card-body">
              <div id="nodeInfo">
                <p class="lnv-text-gray lnv-text-center">Selecciona un nodo del √°rbol</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr class="lnv-divider">

    <!-- IMAGE GALLERY -->
    <div class="lnv-mb-8">
      <h2 class="lnv-mb-4">üñºÔ∏è Image Gallery</h2>
      <div class="lnv-card">
        <div class="lnv-card-header">Galer√≠a de Im√°genes del Laboratorio</div>
        <div class="lnv-card-body">
          <div id="imageGallery"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- Framework JavaScript -->
  <script src="js/lnv-core.js"></script>
  <script src="js/lnv-utils.js"></script>
  <script src="js/lnv-components-advanced2.js"></script>

  <script>
    // Variables globales
    let dataTableInstance, transferInstance, treeInstance, galleryInstance;

    document.addEventListener('DOMContentLoaded', function() {
      
      // ===========================
      // DATA TABLE
      // ===========================
      
      const tableData = [
        { id: 1, patient: 'Juan P√©rez', sample: 'Sangre', status: 'Procesando', date: '2025-10-01', priority: 'Alta' },
        { id: 2, patient: 'Mar√≠a Garc√≠a', sample: 'Orina', status: 'Completado', date: '2025-10-02', priority: 'Media' },
        { id: 3, patient: 'Carlos L√≥pez', sample: 'Saliva', status: 'Pendiente', date: '2025-10-03', priority: 'Baja' },
        { id: 4, patient: 'Ana Mart√≠nez', sample: 'Sangre', status: 'Completado', date: '2025-10-04', priority: 'Alta' },
        { id: 5, patient: 'Luis Rodr√≠guez', sample: 'Orina', status: 'Procesando', date: '2025-10-05', priority: 'Media' },
        { id: 6, patient: 'Sofia Hern√°ndez', sample: 'Sangre', status: 'Pendiente', date: '2025-10-06', priority: 'Alta' },
        { id: 7, patient: 'Diego Castro', sample: 'Saliva', status: 'Completado', date: '2025-10-07', priority: 'Baja' },
        { id: 8, patient: 'Elena Vargas', sample: 'Sangre', status: 'Procesando', date: '2025-10-08', priority: 'Media' },
        { id: 9, patient: 'Miguel Torres', sample: 'Orina', status: 'Pendiente', date: '2025-10-09', priority: 'Alta' },
        { id: 10, patient: 'Laura D√≠az', sample: 'Sangre', status: 'Completado', date: '2025-10-10', priority: 'Media' },
        { id: 11, patient: 'Roberto Silva', sample: 'Saliva', status: 'Procesando', date: '2025-10-11', priority: 'Baja' },
        { id: 12, patient: 'Patricia Reyes', sample: 'Sangre', status: 'Completado', date: '2025-10-12', priority: 'Alta' }
      ];

      dataTableInstance = new LNVAdvancedComponents.DataTable('#dataTable', {
        data: tableData,
        columns: [
          { key: 'id', label: 'ID', sortable: true },
          { key: 'patient', label: 'Paciente', sortable: true },
          { key: 'sample', label: 'Muestra', sortable: true },
          { 
            key: 'status', 
            label: 'Estado', 
            sortable: true,
            render: (value) => {
              const colors = {
                'Completado': 'success',
                'Procesando': 'warning',
                'Pendiente': 'danger'
              };
              return `<span class="lnv-badge lnv-badge-${colors[value]}">${value}</span>`;
            }
          },
          { key: 'date', label: 'Fecha', sortable: true },
          { 
            key: 'priority', 
            label: 'Prioridad',
            render: (value) => {
              const colors = {
                'Alta': 'danger',
                'Media': 'warning',
                'Baja': 'success'
              };
              return `<span class="lnv-chip lnv-chip-sm lnv-chip-${colors[value]}">${value}</span>`;
            }
          }
        ],
        searchable: true,
        sortable: true,
        pagination: true,
        pageSize: 5,
        selectable: true,
        actions: (row) => {
          const actions = document.createElement('div');
          actions.innerHTML = `
            <button class="lnv-btn lnv-btn-sm lnv-btn-light" title="Ver">üëÅÔ∏è</button>
            <button class="lnv-btn lnv-btn-sm lnv-btn-primary" title="Editar">‚úèÔ∏è</button>
            <button class="lnv-btn lnv-btn-sm lnv-btn-danger" title="Eliminar">üóëÔ∏è</button>
          `;
          return actions;
        },
        onSort: (column, direction) => {
          console.log('Ordenando por:', column, direction);
        }
      });

      
      // ===========================
      // TRANSFER LIST
      // ===========================
      
      const permissions = [
        'Ver Dashboard',
        'Crear Pacientes',
        'Editar Pacientes',
        'Eliminar Pacientes',
        'Ver Muestras',
        'Procesar Muestras',
        'Generar Reportes',
        'Exportar Datos',
        'Gestionar Usuarios',
        'Configurar Sistema'
      ];

      transferInstance = new LNVAdvancedComponents.TransferList('#transferList', {
        data: permissions,
        leftTitle: 'Permisos Disponibles',
        rightTitle: 'Permisos Asignados',
        searchable: true,
        onChange: (left, right) => {
          console.log('Disponibles:', left);
          console.log('Asignados:', right);
        }
      });

      
      // ===========================
      // TREE VIEW
      // ===========================
      
      const treeData = [
        {
          label: 'Laboratorio Nacional',
          icon: 'üè•',
          badge: '245',
          children: [
            {
              label: 'Microbiolog√≠a',
              icon: 'ü¶†',
              badge: '85',
              children: [
                { label: 'Bacteriolog√≠a', icon: 'üî¨', badge: '32' },
                { label: 'Virolog√≠a', icon: 'üß¨', badge: '28' },
                { label: 'Parasitolog√≠a', icon: 'üîç', badge: '25' }
              ]
            },
            {
              label: 'Qu√≠mica Cl√≠nica',
              icon: '‚öóÔ∏è',
              badge: '92',
              children: [
                { label: 'Bioqu√≠mica', icon: 'üß™', badge: '45' },
                { label: 'Hormonas', icon: 'üíâ', badge: '30' },
                { label: 'Toxicolog√≠a', icon: '‚ò£Ô∏è', badge: '17' }
              ]
            },
            {
              label: 'Hematolog√≠a',
              icon: 'ü©∏',
              badge: '68',
              children: [
                { label: 'Hemograma', icon: 'üìä', badge: '40' },
                { label: 'Coagulaci√≥n', icon: '‚è±Ô∏è', badge: '28' }
              ]
            }
          ]
        },
        {
          label: 'Administraci√≥n',
          icon: 'üìã',
          badge: '56',
          children: [
            { label: 'Recursos Humanos', icon: 'üë•', badge: '23' },
            { label: 'Finanzas', icon: 'üí∞', badge: '18' },
            { label: 'Log√≠stica', icon: 'üì¶', badge: '15' }
          ]
        }
      ];

      treeInstance = new LNVAdvancedComponents.TreeView('#treeView', {
        data: treeData,
        onSelect: (node) => {
          document.getElementById('nodeInfo').innerHTML = `
            <h4 class="lnv-mb-3">${node.icon} ${node.label}</h4>
            <p><strong>Badge:</strong> ${node.badge || 'N/A'}</p>
            <p><strong>Tiene hijos:</strong> ${node.children ? 'S√≠ (' + node.children.length + ')' : 'No'}</p>
            <div class="lnv-mt-4">
              <button class="lnv-btn lnv-btn-sm lnv-btn-primary">Ver Detalles</button>
              <button class="lnv-btn lnv-btn-sm lnv-btn-light">Exportar</button>
            </div>
          `;
        }
      });

      
      // ===========================
      // IMAGE GALLERY
      // ===========================
      
      const images = [
        {
          src: 'https://via.placeholder.com/800x600/7DD3E0/FFFFFF?text=Laboratorio+1',
          thumb: 'https://via.placeholder.com/400x300/7DD3E0/FFFFFF?text=Lab+1',
          title: '√Årea de Microbiolog√≠a',
          alt: 'Laboratorio de Microbiolog√≠a'
        },
        {
          src: 'https://via.placeholder.com/800x600/4DB8AC/FFFFFF?text=Laboratorio+2',
          thumb: 'https://via.placeholder.com/400x300/4DB8AC/FFFFFF?text=Lab+2',
          title: 'Equipos de An√°lisis',
          alt: 'Equipos modernos de an√°lisis'
        },
        {
          src: 'https://via.placeholder.com/800x600/28A745/FFFFFF?text=Laboratorio+3',
          thumb: 'https://via.placeholder.com/400x300/28A745/FFFFFF?text=Lab+3',
          title: '√Årea de Qu√≠mica Cl√≠nica',
          alt: 'Laboratorio de Qu√≠mica Cl√≠nica'
        },
        {
          src: 'https://via.placeholder.com/800x600/FFC107/FFFFFF?text=Laboratorio+4',
          thumb: 'https://via.placeholder.com/400x300/FFC107/FFFFFF?text=Lab+4',
          title: 'Microscopios Avanzados',
          alt: 'Microscopios de alta precisi√≥n'
        },
        {
          src: 'https://via.placeholder.com/800x600/C1272D/FFFFFF?text=Laboratorio+5',
          thumb: 'https://via.placeholder.com/400x300/C1272D/FFFFFF?text=Lab+5',
          title: '√Årea de Hematolog√≠a',
          alt: 'Laboratorio de Hematolog√≠a'
        },
        {
          src: 'https://via.placeholder.com/800x600/7DD3E0/FFFFFF?text=Laboratorio+6',
          thumb: 'https://via.placeholder.com/400x300/7DD3E0/FFFFFF?text=Lab+6',
          title: 'Equipo de Trabajo',
          alt: 'Personal del laboratorio'
        }
      ];

      galleryInstance = new LNVAdvancedComponents.ImageGallery('#imageGallery', {
        images: images,
        columns: 3,
        lightbox: true
      });

      console.log('%c‚ú® Componentes Avanzados 2 Cargados', 'font-size: 16px; color: #7DD3E0; font-weight: bold;');
    });

    // ===========================
    // FUNCIONES HELPER
    // ===========================
    
    function showSelected() {
      const selected = transferInstance.getSelected();
      if (selected.length === 0) {
        LNV.Toast.warning('No hay permisos seleccionados', 'Info');
        return;
      }

      const list = selected.join('<br>‚Ä¢ ');
      LNV.Confirm.show({
        title: 'Permisos Asignados',
        message: `<strong>Total: ${selected.length}</strong><br><br>‚Ä¢ ${list}`,
        confirmText: 'Guardar',
        cancelText: 'Cerrar',
        onConfirm: () => {
          LNV.Toast.success('Permisos guardados correctamente', '√âxito');
        }
      });
    }
  </script>

</body>
</html>